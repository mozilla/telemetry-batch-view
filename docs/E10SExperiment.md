E10s Experiment Derived Streams
-------------------------------

To create a derived dataset for running analyses like
[e10s_experiment.ipynb](https://github.com/vitillo/e10s_analyses/tree/master/beta46-apz)
:

1. Fire up a 20-node Spark cluster [here](https://analysis.telemetry.mozilla.org/).
2. `cd /mnt && git clone https://github.com/mozilla/telemetry-batch-view.git && cd telemetry-batch-view`
3. `sbt assembly` (this might take a while)
3. `spark-submit --master yarn-client --class com.mozilla.telemetry.views.E10sExperiment target/scala-2.10/telemetry-batch-view-1.1.jar --from 20160608 --to 20160609 --channel beta --version 48.0 --experiment e10s-beta48-cohorts --bucket telemetry-test-bucket` (this _definitely_ will take a while. You can watch some of its progress by `tail -f /mnt/var/log/spark/spark.log`)

Testing
-------

To test run the job on a single day using the `telemetry-test-bucket`; when 
satisfied run on the desired date range using the `telemetry-parquet` bucket.

To verify that data was generated by your test run, you can use the `aws` utility
`aws s3 ls s3://telemetry-test-bucket/e10s_experiment/<your experiment name with '-' replaced with '_'>/v<to-date as YYYYMMDD>/`

e.g. `aws s3 ls s3://telemetry-test-bucket/e10s_experiment/e10s_beta47_cohorts/v20160427/`

If it shows you a list of GUIDs, then it's generating data.
